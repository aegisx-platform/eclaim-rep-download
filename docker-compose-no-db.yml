# Docker Compose - Download Only (No Database)
# Use this if you only want to download files without importing to database

services:
  # Flask Web Application (Download Only)
  web:
    image: ghcr.io/aegisx-platform/eclaim-rep-download:${VERSION:-latest}
    build:
      context: .
      dockerfile: Dockerfile
    container_name: eclaim-web
    restart: unless-stopped
    environment:
      # Flask configuration
      FLASK_APP: app.py
      FLASK_ENV: ${FLASK_ENV:-production}
      TZ: ${TZ:-Asia/Bangkok}

      # E-Claim credentials (update these!)
      ECLAIM_USERNAME: ${ECLAIM_USERNAME:-your_username}
      ECLAIM_PASSWORD: ${ECLAIM_PASSWORD:-your_password}
      
      # Disable database features
      DB_TYPE: none
    volumes:
      # Mount downloads directory for persistence
      - ./downloads:/app/downloads
      # Mount logs directory
      - ./logs:/app/logs
      # Mount data directory for settings persistence
      - ./data:/app/data
      # Mount download history
      - ./download_history.json:/app/download_history.json
    ports:
      - "5001:5001"
    dns:
      - 8.8.8.8
      - 8.8.4.4
      - 1.1.1.1
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5001/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
